(this["webpackJsonpfakeboo-client"]=this["webpackJsonpfakeboo-client"]||[]).push([[0],{207:function(e,t){},209:function(e,t){},223:function(e,t){},225:function(e,t){},253:function(e,t){},255:function(e,t){},256:function(e,t){},261:function(e,t){},263:function(e,t){},282:function(e,t){},294:function(e,t){},297:function(e,t){},315:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n(30),s=n.n(a),r=n(7),o=n.n(r),i=n(11),l=n(8),u=n(321),d=n(322),j=n(323),p=n(324),m=n(318),b=n(319),h=n(169),x=(n(65),n(345)),O=n(316),f=n(317),g=n(320),k=n(1),w=function(e){var t=Object(c.useState)(),n=Object(l.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(),u=Object(l.a)(r,2),d=u[0],j=u[1],p=Object(c.useState)(),w=Object(l.a)(p,2),v=w[0],y=w[1],N=Object(c.useState)(),C=Object(l.a)(N,2),S=C[0],U=C[1],T=Object(c.useState)(),_=Object(l.a)(T,2),P=_[0],I=_[1],E=Object(c.useState)(),z=Object(l.a)(E,2),A=z[0],D=z[1],B=function(){var e=Object(i.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://glacial-wildwood-15974.herokuapp.com/users/new",{method:"POST",body:JSON.stringify({username:d,email:v,password:S,confirm:P}),headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:(n=e.sent).errors?D(n.errors):"string"===typeof n?D([{msg:n}]):s(!0);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){a&&setTimeout((function(){e.toggle(),s()}),1e3),j(""),U(""),y(""),I(""),D()}),[a]),Object(k.jsx)("div",{children:Object(k.jsxs)(x.a,{isOpen:e.modal,toggle:e.toggle,children:[Object(k.jsx)(O.a,{toggle:e.toggle,children:"Create Account"}),Object(k.jsxs)(f.a,{children:[Object(k.jsx)(m.a,{children:Object(k.jsx)(b.a,{placeholder:"Username",name:"username",type:"text",value:d,onChange:function(e){j(e.target.value)}})}),Object(k.jsx)(m.a,{children:Object(k.jsx)(b.a,{type:"email",value:v,onChange:function(e){y(e.target.value)},name:"email",placeholder:"Email"})}),Object(k.jsx)(m.a,{children:Object(k.jsx)(b.a,{value:S,onChange:function(e){U(e.target.value)},type:"password",placeholder:"Password",name:"password"})}),Object(k.jsx)(m.a,{children:Object(k.jsx)(b.a,{value:P,onChange:function(e){I(e.target.value)},type:"password",placeholder:"Confirm Password",name:"confirm"})}),a?Object(k.jsx)(g.a,{children:Object(k.jsx)("p",{children:"Account Created Succesfully!"})}):Object(k.jsx)(h.a,{color:"success",className:"btn-block",onClick:B,children:"Create"})]}),A?Object(k.jsx)(g.a,{children:A.map((function(e,t){return Object(k.jsx)("div",{children:Object(k.jsx)("p",{children:e.msg})},t)}))}):null]})})},v=function(e){var t=Object(c.useState)(),n=Object(l.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(),x=Object(l.a)(r,2),O=x[0],f=x[1],g=Object(c.useState)(),v=Object(l.a)(g,2),y=v[0],N=v[1],C=Object(c.useState)(!1),S=Object(l.a)(C,2),U=S[0],T=S[1],_=function(){return T(!U)},P=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.open("https://glacial-wildwood-15974.herokuapp.com/users/google","_self");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("https://glacial-wildwood-15974.herokuapp.com/users/login",{method:"POST",body:JSON.stringify({username:a,password:O}),headers:{"Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:c=e.sent,401===n.status?N(c):(N(),localStorage.setItem("token",c.token),window.location.reload());case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsx)("div",{className:"welcome-container",children:Object(k.jsxs)(u.a,{className:"align-items-center h-75",children:[Object(k.jsxs)(d.a,{className:"align-items-center h-75",children:[Object(k.jsxs)(j.a,{sm:"12",md:"6",children:[Object(k.jsx)("h1",{className:"title  text-primary font-weight-bold",children:"fakebook"}),Object(k.jsx)("p",{children:"Connect with your fake friends"})]}),Object(k.jsx)(j.a,{sm:"12",md:"6",children:Object(k.jsxs)(p.a,{className:"bg-light p-3 rounded-lg",children:[Object(k.jsx)(m.a,{children:Object(k.jsx)(b.a,{onChange:function(e){s(e.target.value)},className:"form-control-lg",placeholder:"Username",type:"text",name:"username"})}),Object(k.jsx)(m.a,{children:Object(k.jsx)(b.a,{onChange:function(e){f(e.target.value)},className:"form-control-lg",placeholder:"password",name:"password",type:"password"})}),y?Object(k.jsx)(m.a,{children:Object(k.jsx)("p",{children:y})}):null,Object(k.jsxs)(m.a,{children:[Object(k.jsx)(h.a,{onClick:I,size:"lg",className:"login",color:"primary",children:"Log In"}),Object(k.jsxs)(h.a,{className:"btn-danger  btn-lg d-block mt-2",onClick:P,children:[" ","Google Log In"]})]}),Object(k.jsx)("hr",{}),Object(k.jsx)("div",{className:"create",children:Object(k.jsx)(h.a,{size:"lg",color:"success",onClick:function(){_(),N()},children:"Create A New Account"})})]})})]}),U?Object(k.jsx)(w,{modal:U,toggle:_}):null]})})},y=n(91),N=n(16),C=n(327),S=n(337),U=n(332),T=function(e){var t=Object(c.useState)(e.friendRequestSent),n=Object(l.a)(t,2),a=n[0],s=n[1],r=function(){var t=Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://glacial-wildwood-15974.herokuapp.com/users/"+e.id+"/request",{method:"PUT",headers:{Authorization:"Bearer "+e.token}});case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return a?Object(k.jsx)(h.a,{className:"btn-sm p-0 bg-success",style:{fontSize:"13px"},disabled:!0,children:Object(k.jsx)("i",{className:"fas fa-user-check"})}):Object(k.jsx)(h.a,{className:"btn-sm p-0 bg-info",onClick:function(){s(!a),r()},children:Object(k.jsx)("i",{className:"fas fa-user-plus"})})},_=n(325),P=function(e){var t=Object(c.useState)(),n=Object(l.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(),u=Object(l.a)(r,2),d=u[0],j=u[1],g=Object(c.useState)(),w=Object(l.a)(g,2),v=w[0],y=w[1],N=function(){var t=Object(i.a)(o.a.mark((function t(){var n,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new FormData,d||v||alert("Please add a title, description and/or an image"),a&&v&&d?(n.append("title",a),n.append("image",v),n.append("body",d)):a&&v?(n.append("title",a),n.append("image",v)):a&&d&&(n.append("title",a),n.append("body",d)),t.next=5,fetch("https://glacial-wildwood-15974.herokuapp.com/posts/new",{method:"POST",headers:{Authorization:"Bearer "+e.token},body:n});case 5:return c=t.sent,t.next=8,c.json();case 8:t.sent.errors||(e.toggle(),window.location.reload());case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(k.jsx)("div",{children:Object(k.jsxs)(x.a,{isOpen:e.postModal,toggle:e.toggle,children:[Object(k.jsx)(O.a,{toggle:e.toggle,children:"Create Post"}),Object(k.jsx)(f.a,{children:Object(k.jsxs)(p.a,{encType:"multipart/from-data",children:[Object(k.jsx)(m.a,{children:Object(k.jsx)(b.a,{onChange:function(e){s(e.target.value)},placeholder:"Post Title",type:"text",name:"title"})}),Object(k.jsx)(m.a,{children:Object(k.jsx)(b.a,{onChange:function(e){j(e.target.value)},type:"textarea",placeholder:"Post Description",name:"description",value:d})}),Object(k.jsxs)(m.a,{children:[Object(k.jsx)(_.a,{for:"image",children:"Upload Image"}),Object(k.jsx)(b.a,{onChange:function(e){y(e.target.files[0])},type:"file",name:"image"})]}),Object(k.jsx)(h.a,{onClick:N,className:"bg-primary btn-block",children:"Create"})]})})]})})},I=n(331),E=n(336),z=n(335),A=n(334),D=n(333),B=function(e){var t=Object(c.useState)(e.post.title),n=Object(l.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(e.post.body),u=Object(l.a)(r,2),d=u[0],j=u[1],g=Object(c.useState)(e.post.image),w=Object(l.a)(g,2),v=w[0],y=w[1],N=function(){var t=Object(i.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new FormData,d||v||alert("Please add a title, description and/or an image"),a&&v&&d?(n.append("title",a),n.append("image",v),n.append("body",d)):a&&v?(n.append("title",a),n.append("image",v)):a&&d&&(n.append("title",a),n.append("body",d)),t.next=5,fetch("https://glacial-wildwood-15974.herokuapp.com/posts/"+e.post._id+"/edit",{method:"PUT",headers:{Authorization:"Bearer "+e.token},body:n});case 5:200===t.sent.status&&window.location.reload();case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(k.jsx)("div",{children:Object(k.jsxs)(x.a,{isOpen:e.editModal,toggle:e.toggleEdit,children:[Object(k.jsx)(O.a,{tag:"h1",toggle:e.toggleEdit,children:"Edit Post"}),Object(k.jsx)(f.a,{children:Object(k.jsxs)(p.a,{encType:"multipart/from-data",children:[Object(k.jsx)(m.a,{children:Object(k.jsx)(b.a,{onChange:function(e){s(e.target.value)},placeholder:"Post Title",type:"text",name:"title",value:a})}),Object(k.jsx)(m.a,{children:Object(k.jsx)(b.a,{onChange:function(e){j(e.target.value)},type:"textarea",placeholder:"Post Description",name:"description",value:d,style:{height:"150px"}})}),Object(k.jsx)(m.a,{className:"text-center d-flex justify-content-center  flex-column",children:e.post.image?Object(k.jsxs)("div",{children:[Object(k.jsx)("img",{src:e.post.image,alt:"post",className:"h-25 w-25"}),Object(k.jsx)(_.a,{for:"image",children:"Upload Image"}),Object(k.jsx)(b.a,{onChange:function(e){y(e.target.files[0])},type:"file",name:"image"})]}):null}),Object(k.jsx)(h.a,{onClick:N,className:"bg-primary btn-block",children:"Update Post"})]})})]})})},J=n(42),q=n(326),M=n(348),R=n(330),L=n(328),F=n(329),G=function(e){var t=Object(c.useState)(e.post.comments[e.commentIndex].reply[e.replyIndex].reply),n=Object(l.a)(t,2),a=n[0],s=n[1],r=function(){var t=Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/posts/"+e.post._id+"https://glacial-wildwood-15974.herokuapp.com/comment/reply",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token},body:JSON.stringify({reply:a,commentIndex:e.commentIndex,replyIndex:e.replyIndex})});case 2:e.post.comments[e.commentIndex].reply[e.replyIndex].reply=a,e.toggle();case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(k.jsxs)(x.a,{isOpen:e.isOpen,toggle:e.toggle,children:[Object(k.jsx)(O.a,{toggle:e.toggle,children:"Edit Reply"}),Object(k.jsx)(f.a,{children:Object(k.jsxs)(m.a,{children:[Object(k.jsx)(b.a,{onChange:function(e){s(e.target.value)},name:"reply",value:a}),Object(k.jsx)(h.a,{onClick:function(){r()},className:"mt-2 bg-primary btn-block",children:"Edit"})]})})]})},H=n(39),V=n.n(H),K=function(e){var t=Object(c.useState)(""),n=Object(l.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(!1),u=Object(l.a)(r,2),p=u[0],m=u[1],x=Object(c.useState)(e.comment.reply),O=Object(l.a)(x,2),f=O[0],g=O[1],w=Object(c.useState)(),v=Object(l.a)(w,2),y=v[0],N=v[1],S=function(){m(!p)},U=function(){var t=Object(i.a)(o.a.mark((function t(){var n,c,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://glacial-wildwood-15974.herokuapp.com/posts/"+e.post._id+"/reply",{method:"PUT",headers:{Authorization:"Bearer "+e.token,"Content-Type":"application/json"},body:JSON.stringify({index:e.index,username:e.currentUser.username,reply:a})});case 2:return n=t.sent,t.next=5,n.json();case 5:c=t.sent,(r=Object(J.a)(f)).push(c),g(r),s(""),e.comments[e.index].reply.push(c);case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),T=function(){var t=Object(i.a)(o.a.mark((function t(n){var c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(c=Object(J.a)(f)).splice(n,1),g(c),e.post.comments[e.index].reply.splice(n,1),t.next=6,fetch("https://glacial-wildwood-15974.herokuapp.com/posts/comment/"+e.post._id+"/reply",{method:"DELETE",headers:{Authorization:"Bearer "+e.token,"Content-Type":"application/json"},body:JSON.stringify({commentIndex:e.index,replyIndex:n})});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(k.jsxs)("div",{children:[Object(k.jsxs)(q.a,{className:"mt-2",children:[Object(k.jsx)(b.a,{name:"reply",onChange:function(e){s(e.target.value)},placeholder:"Reply comment",className:"",value:a}),Object(k.jsx)(M.a,{addonType:"append",className:"",children:Object(k.jsx)(h.a,{onClick:U,className:"btn-light",children:Object(k.jsx)("i",{className:"far fa-paper-plane"})})})]}),f?f.map((function(t,n){return Object(k.jsx)("div",{children:Object(k.jsxs)(C.a,{className:"reply-container mt-2 mb-2 text-dark pl-1 text-left",children:[Object(k.jsxs)(d.a,{className:" p-1 d-flex align-items-center  w-100 ",children:[Object(k.jsx)(j.a,{className:"col-md-9 ",sm:"9",xs:"8",children:Object(k.jsx)("h5",{children:t.username})}),e.currentUser._id===t.author?Object(k.jsxs)(j.a,{md:2,sm:1,xs:3,className:"d-flex justify-content-start align-items-center",children:[Object(k.jsx)("p",{size:"sm",className:"text-right btn mr-1",children:Object(k.jsx)(L.a,{onClick:function(){T(n)}})}),Object(k.jsx)("p",{size:"sm",className:"text-right btn mr-1",children:Object(k.jsx)(F.a,{onClick:function(e){S(),function(e){N(e.target.id)}(e)},id:n})})]}):null]}),Object(k.jsx)(R.a,{className:" p-1",children:Object(k.jsx)(I.a,{children:t.reply})})]})},V()())})):null,p?Object(k.jsx)(G,{toggle:S,isOpen:p,token:e.token,commentIndex:e.index,replyIndex:y,reply:a.reply,post:e.post,replies:f}):null]})},Q=function(e){var t=Object(c.useState)(e.post.comments[e.commentIndex].comment),n=Object(l.a)(t,2),a=n[0],s=n[1],r=function(){var t=Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://glacial-wildwood-15974.herokuapp.com/posts/comment/"+e.post._id,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token},body:JSON.stringify({comment:a,index:e.commentIndex})});case 2:e.comments[e.commentIndex].comment=a,e.setIsOpen(!e.isOpen);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(k.jsxs)(x.a,{isOpen:e.isOpen,toggle:e.toggle,children:[Object(k.jsx)(O.a,{toggle:e.toggle,children:"Edit Comment"}),Object(k.jsx)(f.a,{children:Object(k.jsxs)(m.a,{children:[Object(k.jsx)(b.a,{onChange:function(e){s(e.target.value)},name:"comment",value:a}),Object(k.jsx)(h.a,{onClick:function(){r()},className:"mt-2 bg-primary btn-block",children:"Edit"})]})})]})},W=function(e){var t=Object(c.useState)(),n=Object(l.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(!1),u=Object(l.a)(r,2),p=u[0],m=u[1],x=Object(c.useState)(),O=Object(l.a)(x,2),f=O[0],g=O[1],w=function(e){g(e.target.id),m(!p)},v=function(){var t=Object(i.a)(o.a.mark((function t(n){var c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(c=Object(J.a)(e.comments)).splice(n,1),e.setComments(c),t.next=5,fetch("https://glacial-wildwood-15974.herokuapp.com/posts/comment/"+e.post._id,{method:"DELETE",headers:{Authorization:"Bearer "+e.token,"Content-Type":"application/json"},body:JSON.stringify({commentIndex:n})});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),y=function(){var t=Object(i.a)(o.a.mark((function t(){var n,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://glacial-wildwood-15974.herokuapp.com/posts/"+e.post._id+"/comment",{method:"PUT",headers:{Authorization:"Bearer "+e.token,"Content-Type":"application/json"},body:JSON.stringify({comment:a})});case 2:return n=t.sent,t.next=5,n.json();case 5:c=t.sent,e.setComments((function(e){return[].concat(Object(J.a)(e),[c])})),e.post.comments.push(c),console.log(e.comments);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(k.jsxs)("div",{children:[Object(k.jsxs)(q.a,{className:"mt-2",children:[Object(k.jsx)(b.a,{name:"comment",onChange:function(e){s(e.target.value)},placeholder:"Enter comment"}),Object(k.jsx)(M.a,{addonType:"append",children:Object(k.jsx)(h.a,{onClick:y,className:"btn-light",children:Object(k.jsx)("i",{className:"far fa-paper-plane"})})})]}),e.comments.map((function(t,n){return Object(k.jsx)("div",{children:Object(k.jsxs)(C.a,{className:"mt-2 text-dark text-left",children:[Object(k.jsxs)(d.a,{className:" p-1 d-flex align-items-center  w-100 mx-auto",children:[Object(k.jsx)(j.a,{md:1,sm:"2",xs:"1",className:"pl-0",children:Object(k.jsx)("img",{className:"circle-image",src:e.currentUser.profilePic,alt:"avatar"})}),Object(k.jsx)(j.a,{className:"col-md-9",sm:"9",xs:"8",children:Object(k.jsxs)("h5",{children:[t.username," "]})}),e.currentUser._id===t.author?Object(k.jsxs)(j.a,{md:2,sm:1,xs:3,className:"d-flex justify-content-start align-items-center",children:[Object(k.jsx)("p",{size:"sm",className:"text-right btn  ",children:Object(k.jsx)(L.a,{onClick:function(){v(n)}})}),Object(k.jsx)("p",{size:"sm",className:"text-right btn ml-1",children:Object(k.jsx)(F.a,{onClick:w,id:n})})]}):null]}),Object(k.jsx)(R.a,{className:" p-1",children:Object(k.jsx)(I.a,{children:t.comment})}),Object(k.jsx)(K,{reply:t.reply,comment:t,comments:e.comments,token:e.token,index:n,currentUser:e.currentUser,post:e.post,setComents:e.setComents},t._id)]})},V()())})),p?Object(k.jsx)(Q,{isOpen:p,setIsOpen:m,toggle:w,post:e.post,token:e.token,commentIndex:f,comments:e.comments,setComents:e.setComments}):null]})},X=function(e){var t=Object(c.useState)(e.liked),n=Object(l.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(e.post.votes.length),u=Object(l.a)(r,2),p=u[0],m=u[1],b=Object(c.useState)(!1),x=Object(l.a)(b,2),O=x[0],f=x[1],g=Object(c.useState)(!1),w=Object(l.a)(g,2),v=w[0],y=w[1],N=Object(c.useState)(e.post.comments),S=Object(l.a)(N,2),T=S[0],_=S[1],P=function(){return y(!v)},J=function(){return s(!a)},q=function(){var t=Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://glacial-wildwood-15974.herokuapp.com/posts/"+e.post._id+"/like",{method:"PUT",headers:{Authorization:"Bearer "+e.token}});case 2:200===t.sent.status&&m(p+1);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),M=function(){var t=Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://glacial-wildwood-15974.herokuapp.com/posts/"+e.post._id+"/unlike",{method:"PUT",headers:{Authorization:"Bearer "+e.token}});case 2:200===t.sent.status&&m(p-1);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),R=function(){var t=Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://glacial-wildwood-15974.herokuapp.com/posts/"+e.post._id+"/delete",{method:"DELETE",headers:{Authorization:"Bearer "+e.token}});case 2:200===t.sent.status&&window.location.reload();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(k.jsxs)(d.a,{className:"mb-2 mt-2",id:e.post._id,children:[Object(k.jsx)(j.a,{className:"text-center",children:Object(k.jsxs)(C.a,{body:!0,className:"bg-dark text-light",children:[Object(k.jsx)(U.a,{tag:"h2",className:"font-weigth-bold",children:e.post.title}),Object(k.jsxs)("p",{className:"text-muted",children:["Posted by ",e.post.username]}),e.post.body?Object(k.jsx)(I.a,{children:e.post.body}):null,e.post.image?Object(k.jsx)("img",{className:"mb-2 post-image",src:e.post.image,alt:"Post"}):null,Object(k.jsxs)("div",{className:" d-flex flex-row mb-2  bg- justify-content-around",children:[Object(k.jsxs)("div",{className:"d-flex align-content-center",children:[a?Object(k.jsx)(D.a,{onClick:function(){J(),M()},style:{cursor:"pointer"},size:25}):Object(k.jsx)(A.a,{onClick:function(){J(),q()},style:{cursor:"pointer"},size:25}),Object(k.jsx)("p",{className:"pl-1 pt-1",children:p})]}),Object(k.jsxs)("div",{className:"d-flex align-cotent-center",children:[Object(k.jsx)(z.a,{size:25}),Object(k.jsx)("p",{className:"pl-1 pt1-",children:e.post.comments.length})]})]}),Object(k.jsx)(h.a,{color:"success",onClick:function(){return f(!O)},children:"Show Comments"}),Object(k.jsx)(E.a,{isOpen:O,children:Object(k.jsx)(W,{post:e.post,token:e.token,currentUser:e.currentUser,comments:T,setComments:_},V()())}),e.currentUser._id===e.post.author?Object(k.jsxs)("div",{className:" d-flex justify-content-around",children:[Object(k.jsx)(h.a,{onClick:P,className:"mt-2 btn-info",children:Object(k.jsx)("i",{className:"fas fa-pen"})}),Object(k.jsx)(h.a,{onClick:R,className:"mt-2 btn-danger",children:Object(k.jsx)("i",{className:"fas fa-trash-alt"})})]}):null]})}),v?Object(k.jsx)(B,{toggleEdit:P,editModal:v,post:e.post,token:e.token}):null]})},Y=function(e){var t=Object(c.useState)(),n=Object(l.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(),p=Object(l.a)(r,2),m=p[0],b=p[1],x=Object(c.useState)(!1),O=Object(l.a)(x,2),f=O[0],g=O[1],w=function(){return g(!f)},v=function(){var t=Object(i.a)(o.a.mark((function t(){var n,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.currentUser){t.next=8;break}return t.next=3,fetch("https://glacial-wildwood-15974.herokuapp.com/users/"+e.currentUser._id+"/all",{method:"GET"});case 3:return n=t.sent,t.next=6,n.json();case 6:c=t.sent,b(c);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),y=function(){var t=Object(i.a)(o.a.mark((function t(){var n,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.currentUser){t.next=8;break}return t.next=3,fetch("https://glacial-wildwood-15974.herokuapp.com/posts/"+e.currentUser._id+"/home");case 3:return n=t.sent,t.next=6,n.json();case 6:c=t.sent,s(c);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){v(),y()}),[]),Object(k.jsxs)("div",{className:"home-container",children:[Object(k.jsx)(u.a,{className:"h-100 w-100",fluid:!0,children:Object(k.jsxs)(d.a,{className:"h-100",children:[Object(k.jsx)(j.a,{className:" col-md-1 bg-light  d-none d-md-block",lg:"3",children:"1"}),Object(k.jsxs)(j.a,{className:" col-md-10",lg:"6",sm:"12",children:[m?Object(k.jsxs)("div",{children:[Object(k.jsx)("p",{className:"text-monospace text-center pt-2 text-dark",children:Object(k.jsx)("u",{children:"Users you might be interested in:"})}),Object(k.jsx)(d.a,{className:"",children:m.map((function(t){return Object(k.jsx)(j.a,{md:"3",sm:"6",xs:"6",className:"mx-auto p-1",children:Object(k.jsxs)(C.a,{className:"rounded-5",children:[Object(k.jsx)(S.a,{className:"bg-dark nonFriend-pics",src:t.profilePic}),Object(k.jsx)(U.a,{tag:"p",className:"text-center font-italic mb-1",children:t.username}),t.request.map((function(e){return e.user})).indexOf(e.currentUser._id)>-1?Object(k.jsx)(T,{token:e.token,friendRequestSent:!0,id:t._id}):Object(k.jsx)(T,{token:e.token,friendRequestSent:!1,id:t._id})]})},t._id)}))})]}):null,Object(k.jsx)(h.a,{className:"btn-block rounded-5 mt-2 bg-primary x",onClick:function(){w()},children:"Create Something"}),a?a.map((function(t,n){return t.map((function(t,n){return-1===t.votes.indexOf(e.currentUser._id)?Object(k.jsx)(X,{currentUser:e.currentUser,post:t,token:e.token,liked:!1},t._id):Object(k.jsx)(X,{currentUser:e.currentUser,post:t,token:e.token,liked:!0},t._id)}))})):Object(k.jsxs)("div",{className:"text-center pt-1",children:[Object(k.jsx)("p",{children:"Here you will see your fake friends activity... "}),Object(k.jsx)("p",{children:"if you had any!"})]})]}),Object(k.jsxs)(j.a,{className:"col-md-1 bg-light d-none d-md-block",lg:"3",children:["3"," "]})]})}),f?Object(k.jsx)(P,{postModal:f,token:e.token,toggle:w}):null]})},Z=n(338),$=n(339),ee=n(340),te=n(341),ne=n(342),ce=n(349),ae=n(347),se=n(346),re=n(343),oe=n(344),ie=function(e){var t=function(){var t=Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://glacial-wildwood-15974.herokuapp.com/users/".concat(e.id,"/accept"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({index:e.index})});case 2:200===t.sent.status&&window.location.reload();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n=function(){var t=Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://glacial-wildwood-15974.herokuapp.com/users/".concat(e.id,"/reject"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({index:e.index})});case 2:200===t.sent.status&&window.location.reload();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(k.jsx)("div",{children:Object(k.jsxs)(C.a,{body:!0,inverse:!0,className:"bg-info p-0 m-1",children:[Object(k.jsx)(U.a,{tag:"h5",className:" p-0 m-0 text-dark text-center",children:e.user.username}),Object(k.jsx)(h.a,{onClick:t,className:"m-1 p-0 bg-success",children:Object(k.jsx)("i",{class:"fas fa-user-plus"})}),Object(k.jsx)(h.a,{onClick:n,className:"m-1 p-0 bg-danger",children:Object(k.jsx)("i",{class:"fas fa-user-minus"})})]})})},le=function(e){var t=function(){var t=Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://glacial-wildwood-15974.herokuapp.com/users/"+e.id+"/delete",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({index:e.index})});case 2:200===t.sent.status&&window.location.reload();case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(k.jsx)("div",{children:Object(k.jsxs)(C.a,{body:!0,inverse:!0,className:"bg-info p-0 m-1",children:[Object(k.jsx)(U.a,{tag:"h5",className:" p-0 m-0 text-dark text-center",children:e.friend.username}),Object(k.jsx)(h.a,{className:"m-1 p-0 bg-danger w-25 mx-auto",onClick:t,children:Object(k.jsx)("i",{className:"fas fa-user-minus"})})]})})},ue=function(e){return e.posts.map((function(t,n){return Object(k.jsx)(d.a,{className:"mb-2",children:Object(k.jsx)(j.a,{className:"text-center",children:Object(k.jsxs)(C.a,{body:!0,className:"bg-dark text-light",children:[Object(k.jsx)(U.a,{children:t.title}),Object(k.jsx)(h.a,{onClick:function(){var n;n=t._id,document.getElementById(n).scrollIntoView(),e.toggle()},color:"success",children:"Go to post"})]})})},t._id)}))},de=function(e){var t=Object(c.useState)(),n=Object(l.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(),u=Object(l.a)(r,2),d=u[0],j=u[1],g=function(){var t=Object(i.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new FormData).append("profilePic",a),t.next=4,fetch("https://glacial-wildwood-15974.herokuapp.com/users/"+e.id+"/profile",{method:"POST",body:n});case 4:200===t.sent.status&&window.location.reload();case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),w=function(){var t=Object(i.a)(o.a.mark((function t(){var n,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://glacial-wildwood-15974.herokuapp.com/posts/"+e.id+"/posts");case 2:return n=t.sent,t.next=5,n.json();case 5:(c=t.sent).length>0&&j(c);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){w()}),[]),Object(k.jsx)("div",{children:Object(k.jsxs)(x.a,{isOpen:e.modal,toggle:e.toggleModal,children:[Object(k.jsx)(O.a,{toggle:e.toggleModal,children:e.username}),Object(k.jsxs)(f.a,{children:[Object(k.jsx)("img",{src:e.user.profilePic,alt:"",className:"mx bg-dark rounded-circle"}),Object(k.jsxs)(p.a,{encType:"multipart/form-data",children:[Object(k.jsxs)(m.a,{className:"text-center",children:[Object(k.jsx)(_.a,{for:"profilePic",children:"Change Avatar"}),Object(k.jsx)(b.a,{onChange:function(e){s(e.target.files[0])},type:"file",name:"profilePic"})]}),Object(k.jsx)(m.a,{children:Object(k.jsx)(h.a,{onClick:function(){g(),e.toggleModal()},className:"bg-primary btn-block",children:"Change"})})]}),d?Object(k.jsx)(ue,{posts:d,toggle:e.toggleModal}):Object(k.jsx)("p",{className:"text-center",children:" No post created yet"})]})]})})},je=function(e){var t=Object(c.useState)(!1),n=Object(l.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(),u=Object(l.a)(r,2),d=u[0],j=u[1],p=Object(c.useState)(),m=Object(l.a)(p,2),b=m[0],h=m[1],x=Object(c.useState)(!1),O=Object(l.a)(x,2),f=O[0],g=O[1],w=Object(N.g)(),v=function(){return g(!f)};Object(c.useEffect)((function(){var t=function(){var t=Object(i.a)(o.a.mark((function t(){var n,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://glacial-wildwood-15974.herokuapp.com/users/"+e.currentUser._id+"/requesting");case 2:return n=t.sent,t.next=5,n.json();case 5:c=t.sent,j(c);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n=function(){var t=Object(i.a)(o.a.mark((function t(){var n,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://glacial-wildwood-15974.herokuapp.com/users/"+e.currentUser._id+"/friends");case 2:return n=t.sent,t.next=5,n.json();case 5:c=t.sent,h(c);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e.currentUser&&(e.currentUser.request.length>0&&t(),e.currentUser.friends.length>0&&n())}),[e.currentUser]);var y=function(){var t=Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://glacial-wildwood-15974.herokuapp.com/users/logout",{method:"POST",mode:"no-cors"});case 2:localStorage.clear(),e.setToken(),w.push("/");case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return e.currentUser?Object(k.jsxs)("div",{children:[Object(k.jsxs)(Z.a,{expand:"md",className:"navbar-dark bg-dark",children:[Object(k.jsxs)($.a,{className:"",children:[Object(k.jsx)("img",{className:"profile-pic mr-2 rounded-circle",src:e.currentUser.profilePic,alt:"user profile pic",style:{cursor:"pointer"},onClick:v}),Object(k.jsx)(ee.a,{className:"mb-0",children:e.currentUser.username})]}),Object(k.jsx)(te.a,{onClick:function(){return s(!a)}}),Object(k.jsx)(E.a,{isOpen:a,navbar:!0,children:Object(k.jsxs)(ne.a,{navbar:!0,className:"ml-auto",children:[b?Object(k.jsxs)(ce.a,{nav:!0,inNavbar:!0,children:[Object(k.jsx)(ae.a,{nav:!0,caret:!0,children:"Friends"}),Object(k.jsx)(se.a,{className:"bg-dark animate__animated animate__fadeIn ",children:b?b.map((function(t,n){return Object(k.jsx)(le,{friend:t,id:e.currentUser._id,index:n},t._id)})):null})]}):Object(k.jsx)(re.a,{children:Object(k.jsx)(oe.a,{children:"No Friends"})}),d?Object(k.jsxs)(ce.a,{nav:!0,inNavbar:!0,children:[Object(k.jsx)(ae.a,{nav:!0,caret:!0,children:"Requests"}),Object(k.jsx)(se.a,{className:"bg-dark",children:d.map((function(t,n){return Object(k.jsx)(ie,{index:n,user:t,id:e.currentUser._id},t._id)}))})]}):Object(k.jsx)(re.a,{children:Object(k.jsx)(oe.a,{className:"",children:"No Requests"})}),Object(k.jsx)(re.a,{children:Object(k.jsx)(oe.a,{style:{cursor:"pointer"},className:"text-danger font-weight-bold",onClick:y,children:"Log out"})})]})})]}),f?Object(k.jsx)(de,{modal:f,toggleModal:v,id:e.currentUser._id,username:e.currentUser.username,user:e.currentUser}):null]}):null},pe=n(96),me=n.n(pe);var be=function(){var e=Object(c.useState)(),t=Object(l.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(),r=Object(l.a)(s,2),u=r[0],d=r[1],j=function(){var e=Object(i.a)(o.a.mark((function e(){var t,n,c,s,r,i,l,u,j;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.location,n=new URLSearchParams(t.search).get("token"),!(c=localStorage.getItem("token"))){e.next=20;break}if(s=me.a.decode(c),!(new Date(1e3*s.exp)<new Date(Date.now()))){e.next=10;break}localStorage.clear(),e.next=18;break;case 10:return e.next=12,fetch("https://glacial-wildwood-15974.herokuapp.com/users/"+s._id+"/current");case 12:return r=e.sent,e.next=15,r.json();case 15:i=e.sent,d(i),a(c);case 18:e.next=37;break;case 20:if(!n){e.next=37;break}if(window.history.pushState({},"",t.href.split("?")[0]),l=me.a.decode(n),!(new Date(1e3*l.exp)<new Date(Date.now()))){e.next=28;break}localStorage.clear(),e.next=37;break;case 28:return e.next=30,fetch("https://glacial-wildwood-15974.herokuapp.com/users/"+l._id+"/current");case 30:return u=e.sent,e.next=33,u.json();case 33:j=e.sent,d(j),a(n),localStorage.setItem("token",n);case 37:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){j()}),[n]),Object(k.jsxs)(y.a,{children:[n?Object(k.jsxs)("div",{children:[Object(k.jsx)(N.a,{to:"/home"})," "]}):Object(k.jsxs)("div",{children:[Object(k.jsx)(N.a,{to:"/welcome"}),Object(k.jsx)(v,{setToken:a})]}),Object(k.jsxs)(N.d,{children:[Object(k.jsx)(N.b,{path:"/welcome",children:Object(k.jsx)(v,{setToken:a})}),Object(k.jsxs)(N.b,{path:"/home",children:[Object(k.jsx)(je,{setToken:a,currentUser:u}),Object(k.jsx)(Y,{currentUser:u,token:n})]})]})]})};n(314);s.a.render(Object(k.jsx)(be,{}),document.getElementById("root"))},65:function(e,t,n){}},[[315,1,2]]]);
//# sourceMappingURL=main.8095c245.chunk.js.map